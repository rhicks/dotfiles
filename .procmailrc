# .procmailrc
# # routes incoming mail to appropriate mailboxes
# PATH=/usr/bin:/usr/local/bin
# MAILDIR=$HOME/Maildir
# DEFAULT=/var/spool/mail/rhicks
# LOGFILE=/dev/null
# SHELL=/bin/sh

# Put mail for postmaster@nero.net into Archive/Postmaster folder
# :0:
# * ^To:.postmaster@nero.net
# .Archive.Postmaster/

SHELL=/bin/bash
FGREP=/bin/fgrep
FROM=`formail -x From:`
SNDR=`formail -x Sender:`
RCVD=`formail -c -x Received:`

LOGFILE=$HOME/.procmail/log
VERBOSE=off

###
##
# Make backup just in case
# :0 c
# .Backup/

###
##
# Eliminate duplicates
#:0 Wh: $HOME/.msgid.lock
#| formail -D 8192 $HOME/.msgid.cache

###
##
# Put Top ASN Report into Network Archive
:0
* ^Subject: Top ASN Report*
.Archive.Network.ASN-Reports/

###
##
# Put OpenNMS Reports into Archive/Network/OpenNMS Archive
:0
* ^Subject: OpenNMS Report*
.Archive.Network.OpenNMS/

###
##
# Handle operation-related email
:0
* ^To.*systems
.Archive.Systems/

###
##
# Handle operation-related email
:0
* ^To.*root@link.nero.net
.Archive.Systems/


###
##
# Backup Reports
:0
* ^Subject: Commvault (is-vc-cs1)*
.Archive.Systems.Backups/

###
##
#  Put mail for postmaster@nero.net into Archive/Postmaster folder
:0
* ^To:.*postmaster@nero.net
.Archive.Postmaster/

###
##
#  Put mail for webmaster@nero.net into Archive/Postmaster folder
:0
* ^To:.*webmaster@nero.net
.Archive.Postmaster/

###
##
# Move NS Nagios messages to UO-NTS/Nagios
:0
* ^From:.*uoregon@nms.uoregon.edu
.Archive.UO-NTS.Nagios/


###
##
# Move Commits to Systems/Commits
:0
* ^To.*commits@nero.net
.Archive.Systems.Commits/

 ###
 #
 # Move NS ItHep messages to UO-NTS/ithelp
:0
* ^From:.*nethelp@ithelp.uoregon.edu
.Archive.UO-NTS.ithelp/

###
##
# Move Internet2 NOC to Internet2 Folder
:0
* ^From:.*noc@ithelp.uoregon.edu
.Archive.Network.Internet2


##
# spam detection via spamprobe
#:0
#SCORE=| /usr/bin/spamprobe train
#
#:0 wf
#| formail -I "X-SpamProbe: $SCORE"
#
#:0 a:
#* ^X-SpamProbe: SPAM
#.Spam.auto-spam/

##
# Stuff to send to DEFAULT
:0
* ^Sender: owner-(is-staff|machineroom|sys-status)
$DEFAULT
